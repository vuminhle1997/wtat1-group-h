(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,a){e.exports=a.p+"static/media/doctor-woman.f90de574.svg"},121:function(e,t,a){e.exports=a.p+"static/media/remote-work-woman.e2170ff4.svg"},122:function(e,t,a){e.exports=a.p+"static/media/logo.49104aa6.svg"},146:function(e,t,a){e.exports=a(211)},151:function(e,t,a){},176:function(e,t,a){},208:function(e,t){},211:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=(a(151),a(85)),i=a(8),u=a.n(i),s=a(14),m=a(5),p=a(45),d=a(17),f=a(131),h=a(266),g=a(246),v=a(249),b=a(251),E=a(252),y=a(212),O=a(272),j=a(257),w=a(269),k=a(214),C=a(15),S=a.n(C),x=a(16),T=a.n(x),A=a(120),M=a.n(A),I=a(121),F=a.n(I),B=a(122),N=a.n(B),L=(new Date).getFullYear(),P=Object(g.a)({root:{paddingTop:"3em"},wrapper:{padding:"1em 0","& .MuiFormControl-root":{padding:".75em 0 .5em 0"}},headline:{padding:".75em 0",fontWeight:"bold",letterSpacing:2,color:"#8a8a8a"}}),_=window.location.href.includes("local")?"http://localhost:5000/api/v1.0/users/login":"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/users/login";function D(e){var t=e.setAppState,a=Object(d.f)(),o=P(),c=Object(n.useState)(localStorage.getItem("email")||""),l=Object(m.a)(c,2),i=l[0],p=l[1],f=Object(n.useState)(localStorage.getItem("password")||""),h=Object(m.a)(f,2),g=h[0],C=h[1],x=Object(n.useState)(!1),A=Object(m.a)(x,2),I=A[0],B=A[1],D=Object(n.useState)("true"===localStorage.getItem("rememberMe")),W=Object(m.a)(D,2),z=W[0],R=W[1];Object(n.useEffect)((function(){return function(){console.log("clears landingpage")}}),[]),Object(n.useEffect)((function(){}),[I]);var U=function(){var e=Object(s.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={user:{email:i,password:g}},e.next=3,S.a.post(_,a).then((function(e){console.log(e),200===e.status&&(B(!1),T.a.set("authToken",e.data.token),t(1),setTimeout((function(){t(2)}),1e3))})).catch((function(e){console.log(e),B(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{className:o.root},r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:4},r.a.createElement("img",{src:M.a,alt:"",srcset:""})),r.a.createElement(b.a,{item:!0,xs:4},r.a.createElement("img",{src:F.a,alt:"",srcset:""})),r.a.createElement(b.a,{item:!0,xs:4,className:o.wrapper},r.a.createElement(E.a,null,r.a.createElement("img",{height:"100px",src:N.a,alt:"",srcset:""}),r.a.createElement(y.a,{variant:"h4",align:"center",className:o.headline},"COVID-19 APP"),r.a.createElement(O.a,{label:"Email",variant:"outlined",value:i,onChange:function(e){return p(e.target.value)}}),r.a.createElement(O.a,{label:"Password",type:"password",value:g,variant:"outlined",onChange:function(e){return C(e.target.value)}}),r.a.createElement(j.a,{control:r.a.createElement(w.a,{checked:z,onChange:function(e){!0===e.target.checked?(localStorage.setItem("email",i),localStorage.setItem("password",g)):localStorage.clear(),localStorage.setItem("rememberMe",e.target.checked),R(e.target.checked)}}),label:"Remember me"}),I?r.a.createElement(y.a,{variant:"subtitle2"},"Your email or password is wrong. Please try again!"):"",r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:6},r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:U},"Login")),r.a.createElement(b.a,{item:!0,xs:6},r.a.createElement(k.a,{variant:"contained",color:"secondary",onClick:function(){return a.push("/register")}},"Register")))))),r.a.createElement(y.a,{variant:"body1",align:"center"},"\xa9"," ".concat(L," | Minh Manh Cong - All rights reserved"))))}var W=a(258),z=a(255),R=a(274),U=a(268),Y=a(275);function G(e,t){for(var a=[],n=e;n<=t;n++)a.push(n);return a}var H=G(1,31),V=G(1,12),J=G(1970,2020),Z=Object(g.a)({root:{padding:"2em"},wrapper:{padding:"2em","& .MuiFormControl-root":{padding:".75em 0 .5em 0"}},back:{position:"fixed",top:"0.5em",left:"0.5em"}}),q=window.location.href.includes("local")?"http://localhost:5000/api/v1.0/users/create":"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/users/create";function Q(e){var t=e.setAppState;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){p(e.coords.latitude),j(e.coords.longitude)}));var a=Object(d.f)(),o=Z(),c=Object(n.useState)(0),l=Object(m.a)(c,2),i=l[0],p=l[1],f=Object(n.useState)(0),h=Object(m.a)(f,2),g=h[0],j=h[1],w=Object(n.useState)(""),C=Object(m.a)(w,2),x=C[0],A=C[1],M=Object(n.useState)(""),I=Object(m.a)(M,2),F=I[0],B=I[1],N=Object(n.useState)(""),L=Object(m.a)(N,2),P=L[0],_=L[1],D=Object(n.useState)(""),G=Object(m.a)(D,2),Q=G[0],X=G[1],$=Object(n.useState)(""),K=Object(m.a)($,2),ee=K[0],te=K[1],ae=Object(n.useState)(""),ne=Object(m.a)(ae,2),re=ne[0],oe=ne[1],ce=Object(n.useState)(1),le=Object(m.a)(ce,2),ie=le[0],ue=le[1],se=Object(n.useState)(1),me=Object(m.a)(se,2),pe=me[0],de=me[1],fe=Object(n.useState)(2020),he=Object(m.a)(fe,2),ge=he[0],ve=he[1],be=Object(n.useState)(""),Ee=Object(m.a)(be,2),ye=Ee[0],Oe=Ee[1],je=Object(n.useState)(""),we=Object(m.a)(je,2),ke=we[0],Ce=we[1],Se=Object(n.useState)(""),xe=Object(m.a)(Se,2),Te=xe[0],Ae=xe[1],Me=Object(n.useState)(null),Ie=Object(m.a)(Me,2),Fe=Ie[0],Be=Ie[1],Ne=Object(n.useState)(!1),Le=Object(m.a)(Ne,2),Pe=Le[0],_e=Le[1],De=Object(n.useState)(!1),We=Object(m.a)(De,2),ze=We[0],Re=We[1];Object(n.useEffect)((function(){}),[Pe,ze]);var Ue=function(){var e=Object(s.a)(u.a.mark((function e(){var n,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ee===re&&ee.length>1)){e.next=7;break}return n=ie>=1&&ie<10?"0".concat(ie):ie,r=pe>=1&&pe<10?"0".concat(pe):pe,o="".concat(n,"/").concat(r,"/").concat(ge),c={user:{username:x,password:ee,firstname:F,lastname:P,gender:ye,dob:o,personalId:ke,email:Q,address:Te,phonenumber:Fe,latitude:i,longitude:g,role:"User"}},e.next=7,S.a.post(q,c).then((function(e){200===e.status&&(T.a.set("authToken",e.data.token),Re(!0),_e(!1),t(1),setTimeout((function(){return a.push("/")}),1500))})).catch((function(e){_e(!0),Re(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{color:"primary",onClick:function(){return a.push("/")},className:o.back},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:"<"}})),r.a.createElement(v.a,{className:o.wrapper},r.a.createElement(E.a,null,r.a.createElement(O.a,{label:"Username *",variant:"outlined",onChange:function(e){return A(e.target.value)}}),r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:6},r.a.createElement(O.a,{label:"Firstname *",fullWidth:!0,variant:"outlined",onChange:function(e){return B(e.target.value)}})),r.a.createElement(b.a,{item:!0,xs:6},r.a.createElement(O.a,{label:"Lastname *",variant:"outlined",fullWidth:!0,onChange:function(e){return _(e.target.value)}}))),r.a.createElement(O.a,{label:"Email *",type:"email",variant:"outlined",onChange:function(e){return X(e.target.value)}}),r.a.createElement(O.a,{label:"Password *",type:"password",variant:"outlined",onChange:function(e){return te(e.target.value)}}),r.a.createElement(O.a,{label:"Confirm password *",type:"password",variant:"outlined",onChange:function(e){return oe(e.target.value)}}),r.a.createElement(z.a,null,r.a.createElement(R.a,null,"Gender *"),r.a.createElement(U.a,{value:ye,variant:"outlined",onChange:function(e){return Oe(e.target.value)}},r.a.createElement(Y.a,{value:"Male"},"Male"),r.a.createElement(Y.a,{value:"Female"},"Female"),r.a.createElement(Y.a,{value:"Misc"},"Not listed"))),r.a.createElement(z.a,null,r.a.createElement(R.a,null,"Birthday *"),r.a.createElement(U.a,{value:ie,variant:"outlined",onChange:function(e){return ue(e.target.value)}},H.map((function(e){return r.a.createElement(Y.a,{key:"day-".concat(e),value:e},e)})))),r.a.createElement(z.a,null,r.a.createElement(R.a,null,"Birthmonth *"),r.a.createElement(U.a,{value:pe,variant:"outlined",onChange:function(e){return de(e.target.value)}},V.map((function(e){return r.a.createElement(Y.a,{key:"month-".concat(e),value:e},e)})))),r.a.createElement(z.a,null,r.a.createElement(R.a,null,"Birthyear *"),r.a.createElement(U.a,{value:ge,variant:"outlined",onChange:function(e){return ve(e.target.value)}},J.map((function(e){return r.a.createElement(Y.a,{key:"year-".concat(e),value:e},e)})))),r.a.createElement(O.a,{label:"Personal ID *",variant:"outlined",onChange:function(e){return Ce(e.target.value)}}),r.a.createElement(O.a,{label:"Address",variant:"outlined",onChange:function(e){return Ae(e.target.value)}}),r.a.createElement(O.a,{label:"Phonenumber",variant:"outlined",onChange:function(e){return Be(e.target.value)}}),r.a.createElement(k.a,{variant:"contained",color:"secondary",onClick:Ue},"Register")),Pe?r.a.createElement(y.a,{variant:"body2"},"Something went wrong"):"",ze?r.a.createElement(y.a,{variant:"body1"},"Successful registed. You will be redirected . . ."):""))}a(176);function X(){return r.a.createElement("div",null)}var $=a(259),K=a(260),ee=a(213),te=a(132),ae=a(125),ne=a.n(ae),re=Object(g.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,marginLeft:"30px"}}}));function oe(e){var t=e.handleLogout,a=re(),n=Object(d.f)(),o=r.a.useState(null),c=Object(m.a)(o,2),l=c[0],i=c[1],u=Boolean(l);return r.a.createElement("div",{className:a.root},r.a.createElement($.a,{position:"static"},r.a.createElement(K.a,null,r.a.createElement(y.a,{variant:"h6",className:a.title},"COVID-19"),r.a.createElement(ee.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit"},r.a.createElement(ne.a,null)),r.a.createElement(te.a,{anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:function(){i(null)}},r.a.createElement(Y.a,{onClick:function(){n.push("/profile")}},"Profile"),r.a.createElement(Y.a,{onClick:t},"Logout")))))}var ce=a(270),le=a(271),ie=a(261),ue=a(262),se=a(263),me=a(267),pe=Object(g.a)({root:{display:"block"},div:{margin:"15px auto"}}),de=window.location.href.includes("local")?"http://localhost:5000/api/v1.0/reports/positive":"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/reports/postive",fe=window.location.href.includes("local")?"http://localhost:5000/api/v1.0/reports/negative":"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/reports/negative";function he(e){var t=e.report,a=e.index,o=e.isAdmin,c=pe(),l=Object(n.useState)(!1),i=Object(m.a)(l,2),p=i[0],d=i[1],f=Object(n.useState)(!1),h=Object(m.a)(f,2),g=h[0],v=h[1],b=Object(n.useState)(!1),E=Object(m.a)(b,2),O=E[0],j=E[1],w=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.put(de,{report:{id:t._id}},{headers:{Authorization:"Bearer ".concat(T.a.get("authToken"))}}).then((function(e){console.log(e),200===e.status?(j(!0),v(!0),d(!1)):(v(!0),d(!1))})).catch((function(e){console.error(e),j(!1),v(!0),d(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.put(fe,{report:{id:t._id}},{headers:{Authorization:"Bearer ".concat(T.a.get("authToken"))}}).then((function(e){console.log(e),200===e.status?(j(!0),v(!0),d(!1)):(j(!1),v(!0),d(!1))})).catch((function(e){console.error(e),v(!0),d(!1),j(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e,t){"clickaway"!==t&&j(!1)};return r.a.createElement(r.a.Fragment,null,g?r.a.createElement(ce.a,{open:O,autoHideDuration:6e3,onClose:x},r.a.createElement(me.a,{severity:"success",onClose:x,variant:"filled",elevation:6},"Status of report changed!")):"",p?r.a.createElement(ce.a,{open:O,autoHideDuration:6e3,onClose:x},r.a.createElement(me.a,{severity:"error",onClose:x,variant:"filled",elevation:6},"Something went wrong!")):"",r.a.createElement(le.a,{className:c.div,key:t._id},r.a.createElement(ie.a,{expandIcon:"x"},r.a.createElement(y.a,null,o?"Report of User: ".concat(t.submitter):"#".concat(a+1))),r.a.createElement(ue.a,{className:c.root},r.a.createElement(y.a,{variant:"caption"},"Submitted on: ",r.a.createElement(y.a,{variant:"body1"},t.date)),r.a.createElement(y.a,{variant:"caption"},"Details: ",r.a.createElement(y.a,{variant:"body1"},t.details)),r.a.createElement(y.a,{variant:"caption"},"Precondition: ",r.a.createElement(y.a,{variant:"body1"},t.precondition)),r.a.createElement(y.a,{variant:"caption"},"Symptoms: ",r.a.createElement(y.a,{variant:"body1"},t.symptoms)),r.a.createElement(y.a,{variant:"caption"},"From infected area:",r.a.createElement(y.a,{variant:"body1"},t.infected_area?"yes":"no")),r.a.createElement(y.a,{variant:"caption"},"Infected from a person: ",r.a.createElement(y.a,{variant:"body1"},t.person_from_infected?"yes":"no")),r.a.createElement(y.a,{variant:"caption"},"Infected: ",r.a.createElement(y.a,{variant:"body1"},t.infected_person?"yes":"no")),r.a.createElement(y.a,{variant:"caption"},"Status: ",r.a.createElement(y.a,{variant:"body1"},(null===t||void 0===t?void 0:t.status)?t.status:"sent")),r.a.createElement(se.a,{variant:"contained"},r.a.createElement(k.a,{color:"primary",onClick:w},"Postive"),r.a.createElement(k.a,{color:"secondary",onClick:C},"Negative")))))}var ge=a(134),ve=a(126),be=a(127),Ee=a(135),ye=a(133),Oe=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],je=function(e){Object(Ee.a)(a,e);var t=Object(ye.a)(a);function a(e){var n;return Object(ve.a)(this,a),(n=t.call(this,e)).googleMapRef=r.a.createRef(),n.createGoogleMap=function(){var e=n.props,t=e.lat,a=e.lng;return new window.google.maps.Map(n.googleMapRef.current,{zoom:10,center:{lat:t||52.503325,lng:a||13.426746},styles:Oe})},n.drawCircles=function(){var e=n.state,t=e.infectedAreas,a=e.infectedCountries;t.length>0&&t.map((function(e){n.drawInfectedAreaCircle(e)})),a.length>0&&a.map((function(e){var t=e.active,a=e.countryInfo;n.drawInfectedArea({lat:a.lat,lng:a.long},t)}))},n.fetchAreasByBounds=function(){var e=Object(s.a)(u.a.mark((function e(t,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.location.href.includes("local")?"http://localhost:5000/api/v1.0/areas?minLat=".concat(t.min,"&maxLat=").concat(t.max,"&minLng=").concat(a.min,"&maxLng=").concat(a.max):"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/areas?minLat=".concat(t.min,"&maxLat=").concat(t.max,"&minLng=").concat(a.min,"&maxLng=").concat(a.max),e.next=3,S.a.get(r).then((function(e){e.data.length>0&&(console.log(e.data),e.data.forEach((function(e){var t=Object(ge.a)(n.state.infectedAreas);t.some((function(t){return t._id===e._id}))||t.push(e),n.setState({infectedAreas:t})})))})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.deleteCirclesOutOfBounds=function(e,t){var a=[];n.state.infectedAreas.forEach((function(n,r){n.latitude>=e.min&&n.latitude<=e.max&&n.longitude>=t.min&&n.longitude<=t.max&&a.push(n)})),n.setState({infectedAreas:a})},n.onMapChange=function(){var e=n.state.googleMap;e.addListener("dragend",(function(){var t={min:e.getBounds().Za.i,max:e.getBounds().Za.j},a={min:e.getBounds().Ua.i,max:e.getBounds().Ua.j};n.deleteCirclesOutOfBounds(t,a),n.fetchAreasByBounds(t,a)})),e.addListener("zoom_changed",(function(){var t={min:e.getBounds().Ya.i,max:e.getBounds().Ya.j},a={min:e.getBounds().Ua.i,max:e.getBounds().Ua.j};n.deleteCirclesOutOfBounds(t,a),n.fetchAreasByBounds(t,a)}))},n.createMarker=function(e){return new window.google.maps.Marker({position:e,map:n.state.googleMap})},n.createCircle=function(e){return new window.google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.4,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:n.state.googleMap,center:e,radius:15e6})},n.drawInfectedArea=function(e,t,a){var r=1100*Math.sqrt(t);return new window.google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.05,strokeWeight:1,fillColor:"#FF0000",fillOpacity:.35,map:n.state.googleMap,center:e,radius:r})},n.drawInfectedAreaCircle=function(e){return new window.google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.4,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:n.state.googleMap,center:{lat:e.latitude,lng:e.longitude},radius:15e3})},n.fetchData=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://corona.lmao.ninja/v2/countries/",["Vietnam","Germany","USA","FR","Thailand"].forEach((function(e){t+=e+"%2C"})),e.next=5,S.a.get(t).then((function(e){n.setState({infectedCountries:e.data},(function(){return console.log(n.state.infectedCountries)}))})).catch((function(e){console.error(e)}));case 5:n.drawCircles();case 6:case"end":return e.stop()}}),e)}))),n.state={googleMap:null,infectedAreas:[],infectedCountries:[]},n}return Object(be.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDlcik1-nD4XiC1ryjEF6JjZO39hsrHP84",window.document.body.appendChild(t),t.addEventListener("load",(function(){e.state.googleMap=e.createGoogleMap(),e.onMapChange(),e.fetchData()}))}},{key:"componentDidUpdate",value:function(){this.drawCircles()}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",ref:this.googleMapRef,style:{width:"400px",height:"300px"}})}}]),a}(n.Component),we=a(129),ke=a.n(we),Ce=a(138),Se=a(264),xe=Object(g.a)((function(e){return{overlay:{background:"rgba(50,50,50, 0.65)",width:"100vw",height:"100vh",position:"fixed",top:0,left:0},root:{position:"relative",top:"1.5em"},paper:{},select:{width:"100%"},wrapper:{width:"85%",margin:"0 auto",padding:"1em 0","& .MuiFormControl-root":{padding:"1em 0 .5em 0"}},headline:{textAlign:"center",padding:"10px 0"},button:{margin:".75em 1em"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Te=window.location.href.includes("local")?"http://localhost:5000/api/v1.0/reports/report":"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/reports/report";function Ae(e){var t=e.handleClose,a=(e.openReportForm,xe()),o=Object(n.useState)(""),c=Object(m.a)(o,2),l=c[0],i=c[1],p=Object(n.useState)(""),d=Object(m.a)(p,2),f=d[0],h=d[1],g=Object(n.useState)(""),E=Object(m.a)(g,2),j=E[0],w=E[1],C=Object(n.useState)(!1),x=Object(m.a)(C,2),A=x[0],M=x[1],I=Object(n.useState)(!1),F=Object(m.a)(I,2),B=F[0],N=F[1],L=Object(n.useState)(0),P=Object(m.a)(L,2),_=P[0],D=P[1],W=Object(n.useState)(0),G=Object(m.a)(W,2),H=G[0],V=G[1],J=Object(n.useState)(!1),Z=Object(m.a)(J,2),q=Z[0],Q=Z[1];navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){D(e.coords.latitude),V(e.coords.longitude)}));var X=function(){var e=Object(s.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer ".concat(T.a.get("authToken"))}},n={report:{latitude:_,longitude:H,symptoms:l,precondition:f,infected_area:B,person_from_infected:A,date:new Date,details:j}},e.next=4,Q(!0);case 4:return e.next=6,S.a.post(Te,n,a).then((function(e){console.log(e),setTimeout((function(){return t()}),1500)})).catch((function(e){console.log(e),Q(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.overlay},r.a.createElement(v.a,{className:a.root},r.a.createElement(Ce.a,{elevation:3},r.a.createElement(y.a,{className:a.headline,variant:"h4"},"Submit report"),r.a.createElement(Se.a,null),r.a.createElement("div",{className:a.wrapper},r.a.createElement(O.a,{label:"Symptoms",variant:"outlined",fullWidth:!0,onChange:function(e){return i(e.target.value)}}),r.a.createElement(O.a,{label:"Precondition",variant:"outlined",fullWidth:!0,onChange:function(e){return h(e.target.value)}}),r.a.createElement(O.a,{label:"Details",multiline:!0,rows:4,rowsMax:10,variant:"outlined",fullWidth:!0,onChange:function(e){return w(e.target.value)}}),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:6},r.a.createElement(z.a,{fullWidth:!0},r.a.createElement(R.a,null,"Contacted with infected person"),r.a.createElement(U.a,{value:A,variant:"outlined",autoWidth:!0,onChange:function(e){return M(e.target.value)}},r.a.createElement(Y.a,{value:!0},"Yes"),r.a.createElement(Y.a,{value:!1},"No")))),r.a.createElement(b.a,{item:!0,xs:6},r.a.createElement(z.a,{fullWidth:!0},r.a.createElement(R.a,null,"Came from infected area"),r.a.createElement(U.a,{value:B,variant:"outlined",autoWidth:!0,onChange:function(e){return N(e.target.value)}},r.a.createElement(Y.a,{value:!0},"Yes"),r.a.createElement(Y.a,{value:!1},"No"))))),r.a.createElement(y.a,{variant:"body1"},"The app needs to localize your current location for submitting the report. Please accept the permission, so the app can access your current geolocation. This is necessary, so that you aware other people, where the virus might be. The provided data will inform the user, where COVID might be located by displaying it on the map. You will keep friends, family and yourself safe."),r.a.createElement(k.a,{className:a.button,variant:"contained",color:"secondary",disabled:q,onClick:X},"Submit"),r.a.createElement(k.a,{className:a.button,variant:"contained",color:"primary",onClick:t},"Cancel"))))))}var Me=a(128),Ie=Object(g.a)({addIcon:{position:"fixed",bottom:"1em",right:"1em"},accordion:{margin:".5em auto"},iframe:{width:"100%",height:"90vh",margin:"2em auto"}}),Fe=window.location.href.includes("local")?"http://localhost:5000/api/v1.0/reports/":"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/reports/",Be=window.location.href.includes("local")?"http://localhost:5000/api/v1.0/reports/user?id=":"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/reports/user?id=";function Ne(e){var t=e.appState,a=e.handleLogout,o=e.isAdmin,c=(e.setIsAdmin,e.auth,e.user),l=(e.setUser,Ie()),i=(Object(d.f)(),Object(n.useState)([])),p=Object(m.a)(i,2),f=p[0],h=p[1],g=Object(n.useState)([]),b=Object(m.a)(g,2),E=b[0],y=b[1],O=Object(n.useState)(0),j=Object(m.a)(O,2),w=j[0],k=(j[1],Object(n.useState)(52.425)),C=Object(m.a)(k,2),x=C[0],T=C[1],A=Object(n.useState)(78.454787),M=Object(m.a)(A,2),I=M[0],F=M[1],B=Object(n.useState)(null),N=Object(m.a)(B,2),L=N[0],P=N[1];Object(n.useEffect)((function(){}),[]),Object(n.useEffect)((function(){o?z():_(),D()}),[c]),Object(n.useEffect)((function(){}),[w]);var _=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===c){e.next=5;break}if(void 0==(t=c._id)){e.next=5;break}return e.next=5,S.a.get("".concat(Be).concat(t)).then((function(e){console.log(e),200===e.status&&y(e.data.reports)})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){T(e.coords.latitude),F(e.coords.longitude)}))},z=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(Fe).then((function(e){200===e.status&&(console.log(e),h(e.data.reports))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{handleLogout:a}),1===t?r.a.createElement("div",null,"Loading"):r.a.createElement("main",null,r.a.createElement(je,{lat:x,lng:I}),r.a.createElement(v.a,null,f.length>0?r.a.createElement("div",null,r.a.createElement("h1",{style:{margin:"1em auto"}},"Submitted reports"),f.map((function(e,t){return r.a.createElement(he,{index:t,key:t,report:e,isAdmin:o})}))):r.a.createElement("div",null,(null===E||void 0===E?void 0:E.length)>0?E.map((function(e,t){return r.a.createElement(he,{key:e._id,index:t,report:e,isAdmin:o})})):r.a.createElement("h1",{style:{margin:"1em auto"}},"You haven't submitted yet . . ."),r.a.createElement("h1",{style:{padding:"1em auto",margin:"20px auto"}},"FAQ and Tips"),r.a.createElement(Me.a,{url:"https://www.who.int/emergencies/diseases/novel-coronavirus-2019/advice-for-public",id:"myId",className:l.iframe,display:"initial",position:"relative"})),o?"":r.a.createElement(W.a,{className:l.addIcon,color:"secondary","aria-label":"add",onClick:function(e){P(e.currentTarget)}},r.a.createElement(ke.a,null)),null!=L?r.a.createElement(Ae,{openReportForm:L,handleClose:function(){P(null)}}):"")),r.a.createElement(X,null))}function Le(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(m.a)(c,2),i=(l[0],l[1]),p=Object(n.useState)(""),d=Object(m.a)(p,2),f=(d[0],d[1]),h=Object(n.useState)(""),g=Object(m.a)(h,2),j=(g[0],g[1]),w=Object(n.useState)(""),k=Object(m.a)(w,2),C=(k[0],k[1]),x=Object(n.useState)(),A=Object(m.a)(x,2),M=(A[0],A[1]),I=Object(n.useState)(),F=Object(m.a)(I,2),B=F[0],N=F[1],L=Object(n.useState)(),P=Object(m.a)(L,2),_=P[0],D=P[1],W=Object(n.useState)(),G=Object(m.a)(W,2),Z=G[0],q=G[1],Q=Object(n.useState)(),$=Object(m.a)(Q,2),K=$[0],ee=$[1],te=Object(n.useState)(),ae=Object(m.a)(te,2),ne=(ae[0],ae[1]),re=Object(n.useState)(),ce=Object(m.a)(re,2),le=(ce[0],ce[1]),ie=Object(n.useState)(),ue=Object(m.a)(ie,2),se=(ue[0],ue[1]),me=Object(n.useState)(!1),pe=Object(m.a)(me,2),de=pe[0],fe=(pe[1],Object(n.useState)(!1)),he=Object(m.a)(fe,2),ge=he[0];he[1];Object(n.useEffect)((function(){ve()}),[]),Object(n.useEffect)((function(){}),[de,ge,a]);var ve=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("http://localhost:5000/api/v1.0/users/profile",{headers:{Authorization:"Bearer ".concat(T.a.get("authToken"))}}).then((function(e){console.log(e);var t=e.data,a=t.username,n=t.firstname,r=t.lastname,c=t.email,l=t.dob,u=t.gender,s=t.personalId,m=t.address,p=t.phonenumber;o(a),i(n),f(r),j(c),N(parseInt(l.substring(0,2))),D(parseInt(l.substring(3,5))),q(parseInt(l.substring(6,l.length+1))),ee(u),ne(s),le(m),se(p)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null),r.a.createElement("main",null,r.a.createElement(v.a,null,r.a.createElement(E.a,null,r.a.createElement(O.a,{label:"Username *",variant:"outlined",onChange:function(e){return o(e.target.value)}}),r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:6},r.a.createElement(O.a,{label:"Firstname *",fullWidth:!0,variant:"outlined",onChange:function(e){return i(e.target.value)}})),r.a.createElement(b.a,{item:!0,xs:6},r.a.createElement(O.a,{label:"Lastname *",variant:"outlined",fullWidth:!0,onChange:function(e){return f(e.target.value)}}))),r.a.createElement(O.a,{label:"Email *",type:"email",variant:"outlined",onChange:function(e){return j(e.target.value)}}),r.a.createElement(O.a,{label:"Password *",type:"password",variant:"outlined",onChange:function(e){return C(e.target.value)}}),r.a.createElement(O.a,{label:"Confirm password *",type:"password",variant:"outlined",onChange:function(e){return M(e.target.value)}}),r.a.createElement(z.a,null,r.a.createElement(R.a,null,"Gender *"),r.a.createElement(U.a,{value:K,variant:"outlined",onChange:function(e){return ee(e.target.value)}},r.a.createElement(Y.a,{value:"Male"},"Male"),r.a.createElement(Y.a,{value:"Female"},"Female"),r.a.createElement(Y.a,{value:"Misc"},"Not listed"))),r.a.createElement(z.a,null,r.a.createElement(R.a,null,"Birthday *"),r.a.createElement(U.a,{value:B,variant:"outlined",onChange:function(e){return N(e.target.value)}},H.map((function(e){return r.a.createElement(Y.a,{key:"day-".concat(e),value:e},e)})))),r.a.createElement(z.a,null,r.a.createElement(R.a,null,"Birthmonth *"),r.a.createElement(U.a,{value:_,variant:"outlined",onChange:function(e){return D(e.target.value)}},V.map((function(e){return r.a.createElement(Y.a,{key:"month-".concat(e),value:e},e)})))),r.a.createElement(z.a,null,r.a.createElement(R.a,null,"Birthyear *"),r.a.createElement(U.a,{value:Z,variant:"outlined",onChange:function(e){return q(e.target.value)}},J.map((function(e){return r.a.createElement(Y.a,{key:"year-".concat(e),value:e},e)})))),r.a.createElement(O.a,{label:"Personal ID *",variant:"outlined",onChange:function(e){return ne(e.target.value)}}),r.a.createElement(O.a,{label:"Address",variant:"outlined",onChange:function(e){return le(e.target.value)}}),r.a.createElement(O.a,{label:"Phonenumber",variant:"outlined",onChange:function(e){return se(e.target.value)}})),de?r.a.createElement(y.a,{variant:"body2"},"Something went wrong"):"",ge?r.a.createElement(y.a,{variant:"body1"},"Successful registed. You will be redirected . . ."):"")),r.a.createElement(X,null))}var Pe=a(130),_e=a.n(Pe);a(265);var De="dark"===T.a.get("themeType")?"dark":"light",We=Object(f.a)({palette:{type:De},spacing:2}),ze=window.location.href.includes("localhost")?"http://localhost:5000/":"https://covid-19-wtat1-group-h.herokuapp.com/",Re=window.location.href.includes("localhost")?"http://localhost:5000/api/v1.0/users/profile":"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/users/profile",Ue=window.location.href.includes("localhost")?"http://localhost:5000/api/v1.0/users/refresh":"https://covid-19-wtat1-group-h.herokuapp.com/api/v1.0/users/refresh";var Ye=function(){var e,t=Object(n.useState)(0),a=Object(m.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(!1),f=Object(m.a)(i,2),g=f[0],v=f[1],b=Object(n.useState)(!1),E=Object(m.a)(b,2),y=E[0],O=E[1],j=Object(n.useState)(null),w=Object(m.a)(j,2),k=w[0],C=w[1],x=Object(n.useState)(null),A=Object(m.a)(x,2),M=A[0],I=A[1],F=r.a.useState(!1),B=Object(m.a)(F,2),N=B[0],L=B[1],P=function(e,t){"clickaway"!==t&&L(!1)};Object(n.useEffect)((function(){W(),_e()(ze).on("covid daily report",(function(e){console.log(e),I(e),L(!0)}))}),[]),Object(n.useEffect)((function(){!0===g&&_()}),[g]);var _=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:"Bearer ".concat(T.a.get("authToken"))}},e.next=3,S.a.get(Re,t).then((function(e){console.log(e),"Employee_Public_Health"===e.data.role&&O(!0),C(e.data)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.a.get("authToken")&&(c(1),setTimeout(Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post(Ue,{},{headers:{Authorization:"Bearer ".concat(T.a.get("authToken"))}}).then((function(e){200===e.status&&(c(2),v(!0),T.a.set("authToken",e.data.token))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),1500));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.remove("authToken");case 2:setTimeout((function(){c(0)}),1e3);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,M?r.a.createElement(ce.a,{open:N,autoHideDuration:6e3,onClose:P},r.a.createElement(me.a,{severity:"warning",onClose:P,elevation:6,variant:"filled"},"Total new cases: ",M.NewConfirmed," ",r.a.createElement("br",null),"Total cases: ",M.TotalConfirmed)):null,r.a.createElement(h.a,{theme:We},r.a.createElement(p.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/"},0===o?r.a.createElement(D,{setAppState:c,setAuth:v}):r.a.createElement(Ne,(e={appState:o,auth:g,user:k,setIsAdmin:O,isAdmin:y,handleLogout:z},Object(l.a)(e,"setIsAdmin",O),Object(l.a)(e,"setUser",C),e))),r.a.createElement(d.a,{path:"/profile"},r.a.createElement(Le,{user:k})),r.a.createElement(d.a,{path:"/register"},r.a.createElement(Q,{setAppState:c,setAuth:v}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[146,1,2]]]);
//# sourceMappingURL=main.0642dcb7.chunk.js.map